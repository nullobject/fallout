#!/usr/bin/env ruby

$:.unshift File.join(File.expand_path(File.dirname(__FILE__)), '..', 'lib')

require 'rubygems'
require 'bundler/setup'

require 'fallout'

options = {
  :dev   => '/dev/tty.usbserial-A7004HZe',
  :mode  => :spi,
  :power => true
}

Bucaneer::BusPirate.connect(options) do |spi|
  marquee = Fallout::Marquee.new(spi)

  marquee.when_finished {|marquee| marquee.start_message(Time.now.strftime("%H:%M:%S")) }

  marquee.start
  sleep 20
  marquee.stop
end
